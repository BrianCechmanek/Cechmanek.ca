<html>
<canvas id='heartCanvas' width='100%' height='100%'></canvas>
<script>
    const endAngle = 226;
    let canvas = document.getElementById('heartCanvas');
    let context = canvas.getContext('2d');
    let counter = 60;
    let radius, tx, ty;

    canvas.width = document.body.clientWidth; //document.width is obsolete
    canvas.height = document.body.clientHeight; //document.height is obsolete
    canvasW = canvas.width;
    canvasH = canvas.height;


    context.font = "60px Arial";
    context.strokeStyle = 'black';
    context.textAlign = "center";
    context.fillText("HAPPY V-DAY MB!", canvasW/2, canvasH/2);
    context.fillText("I LOVE YOU", canvasW/2, canvasH/2+60);
    context.font = "10px Comic Sans";
    context.fillText("(But also Saturday Boom Boom Day)", canvasW/2, canvasH/2+70);

    context.translate(tx,ty);
    randomize();
    requestAnimationFrame(animate);

    function animate() {
        let x,y;
        if (counter <= endAngle) {
            let radians = Math.PI / 180 * counter;
            y = radius * Math.sin(radians);
            x = radius * Math.cos(radians);
            context.fillRect(radius / 2 - x, -y, 2, 2);
            context.fillRect(-radius / 2 + x, -y, 2, 2);
        }
        else {
            x = counter - endAngle - radius * 1.2;
            y = counter - endAngle + radius * 0.71;
            context.fillRect(x,y,2,2);
            context.fillRect(-x,y,2,2);
        }
        counter = counter + 1;
        if (counter >= endAngle + radius * 1.2) randomize();
        requestAnimationFrame(animate);
    }

    function randomize() {
        counter = 60;
        context.fillStyle = 'rgba(255,' + Math.floor(Math.random() * 255) + ', 255 ,1)';
        radius = Math.random() * 100;
        context.translate(-tx, -ty);
        tx = Math.random() * canvas.width;
        ty = Math.random() * canvas.height;
        context.translate(tx, ty);
    }
</script>
</html>
